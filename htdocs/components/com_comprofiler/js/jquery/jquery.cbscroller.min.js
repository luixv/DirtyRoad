(function(h){var l=[];var t={init:function(e){return this.each(function(){var t=this;var r=h(t).data("cbscroller");if(r){return}r={};r.options=typeof e!="undefined"?e:{};r.defaults=h.fn.cbscroller.defaults;r.settings=h.extend(true,{},r.defaults,r.options);r.element=h(t);if(r.settings.useData){h.each(r.defaults,function(e,t){if(e!="init"&&e!="useData"){var l=r.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof l!="undefined"){r.settings[e]=l}else{l=r.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof l!="undefined"){r.settings[e]=l}}}})}r.element.triggerHandler("cbscroller.init.before",[r]);if(!r.settings.init){return}r.resizeHandler=function(){i.call(t,r)};h(window).on("resize",r.resizeHandler);if(r.settings.width){r.leftHandler=function(e){e.preventDefault();n.call(t,"left",r)};r.rightHandler=function(e){e.preventDefault();n.call(t,"right",r)};r.element.children(".cbScrollerLeft").on("click",r.leftHandler);r.element.children(".cbScrollerRight").on("click",r.rightHandler)}if(r.settings.height){r.upHandler=function(e){e.preventDefault();n.call(t,"up",r)};r.downHandler=function(e){e.preventDefault();n.call(t,"down",r)};r.element.children(".cbScrollerUp").on("click",r.upHandler);r.element.children(".cbScrollerDown").on("click",r.downHandler)}i.call(t,r);r.element.on("remove.cbscroller destroy.cbscroller",function(){r.element.cbscroller("destroy")});r.element.on("rebind.cbscroller",function(){r.element.cbscroller("rebind")});r.element.on("modified.cbscroller",function(e,t,l,i){if(t!=l){r.element.cbscroller("rebind")}});r.element.on("cloned.cbscroller",function(){h(this).off(".cbscroller");h(this).removeData("cbscroller");if(r.settings.width){h(this).children(".cbScrollerLeft").off("click",r.leftHandler).addClass("hidden");h(this).children(".cbScrollerRight").off("click",r.rightHandler).addClass("hidden")}if(r.settings.height){h(this).children(".cbScrollerUp").off("click",r.upHandler).addClass("hidden");h(this).children(".cbScrollerDown").off("click",r.downHandler).addClass("hidden")}h(this).removeClass("cbScrollerWidth cbScrollerHeight");h(this).cbscroller(r.options)});r.element.triggerHandler("cbscroller.init.after",[r]);r.element.data("cbscroller",r);l.push(r)})},update:function(){var e=h(this).data("cbscroller");if(!e){return this}i.call(this,e);return this},left:function(){var e=h(this).data("cbscroller");if(!e||!e.settings.width){return this}n.call(this,"left",e);return this},right:function(){var e=h(this).data("cbscroller");if(!e||!e.settings.width){return this}n.call(this,"right",e);return this},up:function(){var e=h(this).data("cbscroller");if(!e||!e.settings.height){return this}n.call(this,"up",e);return this},down:function(){var e=h(this).data("cbscroller");if(!e||!e.settings.height){return this}n.call(this,"down",e);return this},rebind:function(){var e=h(this).data("cbscroller");if(!e){return this}e.element.cbscroller("destroy");e.element.cbscroller(e.options);return this},destroy:function(){var e=h(this).data("cbscroller");if(!e){return this}e.element.off(".cbscroller");h(window).off("resize",e.resizeHandler);if(e.settings.width){e.element.children(".cbScrollerLeft").off("click",e.leftHandler).addClass("hidden");e.element.children(".cbScrollerRight").off("click",e.rightHandler).addClass("hidden")}if(e.settings.height){e.element.children(".cbScrollerUp").off("click",e.upHandler).addClass("hidden");e.element.children(".cbScrollerDown").off("click",e.downHandler).addClass("hidden")}e.element.removeClass("cbScrollerWidth cbScrollerHeight");e.element.removeData("cbscroller");e.element.triggerHandler("cbscroller.destroyed",[e]);return this},instances:function(){return l}};function i(e){e.element.removeClass("cbScrollerWidth cbScrollerHeight");var t=e.element.children(".cbScrollerContent");var l=0;var i=0;var r=t.children();if(e.settings.elements){r=r.find(e.settings.elements)}if(e.settings.ignore){r=r.not(e.settings.ignore)}r.each(function(){l+=h(this).width();i+=h(this).height()});if(e.settings.width){var n=e.element.children(".cbScrollerLeft").addClass("hidden");var s=e.element.children(".cbScrollerRight").addClass("hidden");if(l>t.width()){e.element.addClass("cbScrollerWidth");n.removeClass("hidden");s.removeClass("hidden")}}if(e.settings.height){var c=e.element.children(".cbScrollerUp").addClass("hidden");var o=e.element.children(".cbScrollerDown").addClass("hidden");if(i>t.height()){e.element.addClass("cbScrollerHeight");c.removeClass("hidden");o.removeClass("hidden")}}}function n(e,t){if((e=="left"||e=="right")&&!t.settings.width){return}else if((e=="up"||e=="down")&&!t.settings.height){return}var l=t.element.children(".cbScrollerContent");var i=0;var r=0;var n=null;var s=l.children();if(t.settings.elements){s=s.find(t.settings.elements)}if(t.settings.ignore){s=s.not(t.settings.ignore)}s.each(function(){i+=h(this).width();r+=h(this).height()});s.each(function(){switch(e){case"left":if(h(this).offset().left<l.offset().left){n=h(this)}break;case"right":if(h(this).offset().left+h(this).width()>l.offset().left+l.width()){n=h(this);return false}break;case"up":if(h(this).offset().top<l.offset().top){n=h(this)}break;case"down":if(h(this).offset().top+h(this).height()>l.offset().top+l.height()){n=h(this);return false}break}});if(e=="left"||e=="right"){if(n){l.scrollTo(n,"fast",{axis:"x",easing:"linear"})}else{if(t.settings.loop){var c=i;if(e=="right"){c=0}l.scrollTo(c,0,{axis:"x",easing:"linear"})}else{var o=0;if(e=="right"){o=i}l.scrollTo(o,"fast",{axis:"x",easing:"linear"})}}}else if(e=="up"||e=="down"){if(n){l.scrollTo(n,"fast",{axis:"y",easing:"linear"})}else{if(t.settings.loop){var a=r;if(e=="down"){a=0}l.scrollTo(a,0,{axis:"x",easing:"linear"})}else{var d=0;if(e=="down"){d=r}l.scrollTo(d,"fast",{axis:"y",easing:"linear"})}}}}h.fn.cbscroller=function(e){if(t[e]){return t[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return t.init.apply(this,arguments)}return this};h.fn.cbscroller.defaults={init:true,useData:true,elements:null,ignore:null,width:true,height:true,loop:false}})(jQuery);