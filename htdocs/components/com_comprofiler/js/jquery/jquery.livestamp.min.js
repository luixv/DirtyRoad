(function(e){if(typeof define==="function"&&define.amd){define(["jquery","moment"],e)}else{e(jQuery,moment)}})(function(r,u){var t=1e3,e=false,i=r([]),n=function(){o.resume()},a=function(e,t){var n=e.data("livestampdata");if(typeof t=="number")t*=1e3;e.removeAttr("data-livestamp").removeData("livestamp");t=u(t);if(u.isMoment(t)&&!isNaN(+t)){var a=r.extend({},{original:e.contents()},n);a.moment=u(t);e.data("livestampdata",a).empty();i.push(e[0])}},f=function(){if(e)return;o.update();setTimeout(f,t)},o={update:function(){r("[data-livestamp]").each(function(){var e=r(this);a(e,e.data("livestamp"))});var f=[];i.each(function(){var e=r(this),t=e.data("livestampdata");if(t===undefined)f.push(this);else if(u.isMoment(t.moment)){var n=e.html(),a=t.moment.fromNow();if(n!=a){var i=r.Event("change.livestamp");e.trigger(i,[n,a]);if(!i.isDefaultPrevented())e.html(a)}}});i=i.not(f);delete i.prevObject},pause:function(){e=true},resume:function(){e=false;f()},interval:function(e){if(e===undefined)return t;t=e}},m={add:function(e,t){if(typeof t=="number")t*=1e3;t=u(t);if(u.isMoment(t)&&!isNaN(+t)){e.each(function(){a(r(this),t)});o.update()}return e},destroy:function(n){i=i.not(n);n.each(function(){var e=r(this),t=e.data("livestampdata");if(t===undefined)return n;e.html(t.original?t.original:"").removeData("livestampdata")});return n},isLivestamp:function(e){return e.data("livestampdata")!==undefined}};r.livestamp=o;r(n);r.fn.livestamp=function(e,t){if(!m[e]){t=e;e="add"}return m[e](this,t)}});