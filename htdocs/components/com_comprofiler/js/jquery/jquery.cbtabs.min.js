(function(d){var l=[];var t={init:function(s){return this.each(function(){var r=this;var b=d(r).data("cbtabs");if(b){return}b={};b.options=typeof s!="undefined"?s:{};b.defaults=d.fn.cbtabs.defaults;b.settings=d.extend(true,{},b.defaults,b.options);b.element=d(r);b.tabs=[];if(b.settings.useData){d.each(b.defaults,function(e,t){if(e!="init"&&e!="useData"){var a=b.element.data("cbtabs"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof a!="undefined"){b.settings[e]=a}else{a=b.element.data("cbtabs"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof a!="undefined"){b.settings[e]=a}}}})}b.element.triggerHandler("cbtabs.init.before",[b]);if(!b.settings.init){return}var e=null;if(b.settings.useCookies){e=document.cookie.match(new RegExp(b.element.attr("id")+"=([^;]+)"))}b.selected=false;b.tabsNav=b.element.find(".cbTabsNav:first");b.tabsToggle=b.element.find(".cbNavBarOverflowToggle:first");b.tabsContent=b.element.find(".cbTabsContent:first");b.tabPanes=b.tabsContent.children(".cbTabPane");b.tabNavs=b.tabPanes.children(".cbTabNav");b.tabNavLinks=b.tabNavs.find(".cbTabNavLink");b.tabNavsPrevious=b.tabPanes.find(".cbTabNavPrevious");b.tabNavsNext=b.tabPanes.find(".cbTabNavNext");b.tabNavs.each(function(e){var i=d(d(this)[0].outerHTML.replace(/h2/,"li")).appendTo(b.tabsNav);var s=i.children(".cbTabNavLink");var r=d(this).parent();var l={tabNav:i,tabNavLink:s,tabPane:r,tabIndex:e+1};b.tabs.push(l);d(this).remove();i.children(".cbTabNavLink").on("click",function(e,t,a){e.preventDefault();e.stopPropagation();if(typeof a=="undefined"){a=e}if(!i.hasClass("disabled")&&(!b.settings.stepByStep||t===true)){b.tabNavLinks.removeClass("active");b.tabPanes.removeClass("active");s.addClass("active");r.addClass("active");if(b.settings.useCookies){var n=new Date;n.setTime(n.getTime()+24*60*60*1e3);document.cookie=b.element.attr("id")+"="+i.attr("id")+"; expires="+n.toGMTString()+"; path=/"}b.selected=l;if(b.tabsToggle.length){b.tabsToggle.prop("checked",false)}b.element.triggerHandler("cbtabs.selected",[a,b,l])}});if(d.trim(r.html())==""){l.tabNav.addClass("disabled hidden");l.tabNavLink.removeClass("active");l.tabPane.addClass("disabled hidden").removeClass("active")}});b.tabNavs=b.tabsNav.children(".cbTabNav");b.tabNavLinks=b.tabNavs.find(".cbTabNavLink");if(!b.tabNavs.length||b.tabNavs.filter(".disabled").length==b.tabNavs.length){var t=b.element.parent();if(t.hasClass("cbTabPane")){if(!b.element.siblings().length){t.closest(".cbTabs").cbtabs("hide",t.attr("id"))}}}b.prevHandler=function(e){e.preventDefault();e.stopPropagation();var t=d(this).closest(".cbTabPane");var a=c.call(r,t.attr("id"));if(a){var n=a.tabNav.prevAll(":not(.disabled)").first();if(!n.length){n=a.tabNav.nextAll(":not(.disabled)").last()}if(n.length){n.children("a").trigger("click",[true,e]);n[0].scrollIntoView();b.element.triggerHandler("cbtabs.previous",[e,b,a,c.call(r,n.attr("id"))])}}};b.tabNavsPrevious.on("click",b.prevHandler);b.nextHandler=function(e){e.preventDefault();e.stopPropagation();var t=d(this).closest(".cbTabPane");var a=c.call(r,t.attr("id"));if(a){var n=a.tabNav.nextAll(":not(.disabled)").first();if(!n.length){n=a.tabNav.prevAll(":not(.disabled)").last()}if(n.length){var i=b.element.closest("form");if(i.length){var s=i.data("cbvalidate");if(s){if(!s.element.cbvalidate("validate",t,true)){return}}}n.children("a").trigger("click",[true,e]);n[0].scrollIntoView();b.element.triggerHandler("cbtabs.next",[e,b,a,c.call(r,n.attr("id"))])}}};b.tabNavsNext.on("click",b.nextHandler);if(b.settings.stepByStep){b.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var a=b.element.closest("form");var n=b.tabPanes.not(".disabled").last().find(".cbTabNavNext");n.addClass("hidden");if(a.length){var i=a.find('input[type="submit"]:first');i.appendTo(n.parent())}}b.element.on("remove.cbtabs destroy.cbtabs",function(){b.element.cbtabs("destroy")});b.element.on("rebind.cbtabs",function(){b.element.cbtabs("rebind")});b.element.on("modified.cbtabs",function(e,t,a,n){if(t!=a){b.element.cbtabs("rebind")}});b.element.on("cloned.cbtabs",function(){d(this).off(".cbtabs");d(this).removeData("cbtabs");var e=d(this).find(".cbTabsNav:first");var a=d(this).find(".cbTabsContent:first");var t=a.children(".cbTabPane");var n=e.children(".cbTabNav");var i=t.find(".cbTabNavPrevious");var s=t.find(".cbTabNavNext");n.each(function(e){var t=d(this).children(".cbTabNavLink").attr("href");d(this).removeClass("disabled hidden");d(this).children(".cbTabNavLink").removeClass("active");d(d(this)[0].outerHTML.replace(/li/,"h2")).prependTo(a.find(t));d(this).remove()});i.off("click",b.prevHandler);s.off("click",b.nextHandler);d(this).cbtabs(b.options)});b.element.triggerHandler("cbtabs.init.after",[b]);b.element.data("cbtabs",b);l.push(b);if(e){f.call(r,c.call(r,e[1]),false)}if(b.settings.tabSelected){f.call(r,c.call(r,b.settings.tabSelected))}if(b.selected==false){b.tabNavs.not(".disabled").first().children(".cbTabNavLink").trigger("click",[true])}})},selected:function(){var e=d(this).data("cbtabs");if(!e){return false}return e.selected},select:function(e){if(typeof e=="undefined"){e=null}return f.call(this,c.call(this,e))},disable:function(e){if(typeof e=="undefined"){e=null}return a.call(this,c.call(this,e))},enable:function(e){if(typeof e=="undefined"){e=null}return n.call(this,c.call(this,e))},hide:function(e){if(typeof e=="undefined"){e=null}return i.call(this,c.call(this,e))},show:function(e){if(typeof e=="undefined"){e=null}return s.call(this,c.call(this,e))},rebind:function(){var e=d(this).data("cbtabs");if(!e){return this}e.element.cbtabs("destroy");e.element.cbtabs(e.options);return this},destroy:function(){var a=d(this).data("cbtabs");if(!a){return this}d.each(a.tabs,function(e,t){t.tabNav.removeClass("disabled hidden");t.tabNavLink.removeClass("active");t.tabPane.removeClass("disabled hidden active");d(t.tabNav[0].outerHTML.replace(/li/,"h2")).prependTo(t.tabPane);t.tabNav.remove()});a.tabNavsPrevious.off("click",a.prevHandler);a.tabNavsNext.off("click",a.nextHandler);a.element.off(".cbtabs");d.each(l,function(e,t){if(t.element==a.element){l.splice(e,1);return false}return true});a.element.removeData("cbtabs");a.element.triggerHandler("cbtabs.destroyed",[a]);return this},instances:function(){return l}};function c(a){if(!a){return null}var e=d(this).data("cbtabs");if(!e){return null}var n=null;d.each(e.tabs,function(e,t){if(a==t.tabNav.text()||a==t.tabNav.attr("id")||a==t.tabPane.attr("id")||"cbtabnav"+a==t.tabNav.attr("id")||"cbtabpane"+a==t.tabPane.attr("id")){n=t;return false}return true});return n}function f(e,t){if(!e){return false}var a=d(this).data("cbtabs");if(!a){return false}var n=false;if(typeof t=="undefined"){t=true}if(e){if(!e.tabNav.hasClass("disabled")){n=true;e.tabNav.children(".cbTabNavLink").trigger("click",[true]);if(t){e.tabNav.parents(".cbTabPane").each(function(){d("#"+d(this).attr("id").replace(/cbtabpane/,"cbtabnav")).children(".cbTabNavLink").trigger("click",[true])})}}}return n}function a(e){if(!e){return false}var t=d(this).data("cbtabs");if(!t){return false}var a=false;if(e){a=true;e.tabNav.addClass("disabled");e.tabPane.addClass("disabled");if(t.settings.stepByStep){t.tabPanes.find(".cbTabNavPrevious.hidden").removeClass("hidden");t.tabPanes.find(".cbTabNavNext.hidden").removeClass("hidden");t.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var n=t.element.closest("form");var i=t.tabPanes.not(".disabled").last().find(".cbTabNavNext");i.addClass("hidden");if(n.length){var s=n.find('input[type="submit"]:first');s.appendTo(i.parent())}}if(e.tabNavLink.hasClass("active")){t.tabNavs.not(".disabled").first().children(".cbTabNavLink").trigger("click",[true])}d(this).triggerHandler("cbtabs.disable",[t,e])}return a}function n(e){if(!e){return false}var t=d(this).data("cbtabs");if(!t){return false}var a=false;if(e){a=true;e.tabNav.removeClass("disabled");e.tabPane.removeClass("disabled");if(t.settings.stepByStep){t.tabPanes.find(".cbTabNavPrevious.hidden").removeClass("hidden");t.tabPanes.find(".cbTabNavNext.hidden").removeClass("hidden");t.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var n=t.element.closest("form");var i=t.tabPanes.not(".disabled").last().find(".cbTabNavNext");i.addClass("hidden");if(n.length){var s=n.find('input[type="submit"]:first');s.appendTo(i.parent())}}d(this).triggerHandler("cbtabs.enable",[t,e])}return a}function i(e){if(!e){return false}var t=d(this).data("cbtabs");if(!t){return false}if(a.call(this,e)){e.tabNav.addClass("hidden");d(this).triggerHandler("cbtabs.hide",[t,e]);return true}return false}function s(e){if(!e){return false}var t=d(this).data("cbtabs");if(!t){return false}if(n.call(this,e)){e.tabNav.removeClass("hidden");d(this).triggerHandler("cbtabs.show",[t,e]);return true}return false}d.fn.cbtabs=function(e){if(t[e]){return t[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return t.init.apply(this,arguments)}return this};d.fn.cbtabs.defaults={init:true,useData:true,useCookies:true,stepByStep:false,tabSelected:null};d(document).on("click",".cbTabNavExternal",function(e){e.preventDefault();e.stopPropagation();var n=d(this).data("tab");if(typeof n!="undefined"){d.each(l,function(e,t){var a=c.call(t.element[0],n);if(a){f.call(t.element[0],a);return false}return true})}})})(jQuery);