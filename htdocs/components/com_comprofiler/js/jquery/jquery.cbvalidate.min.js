(function(E){var a=[];var t={init:function(t){return this.each(function(){var e=this;var d=E(e).data("cbvalidate");if(d){return}d={};d.options=typeof t!="undefined"?t:{};d.defaults=E.fn.cbvalidate.defaults;d.settings=E.extend(true,{},d.defaults,d.options);d.element=E(e);if(d.settings.useData){E.each(d.defaults,function(e,t){if(e!="init"&&e!="useData"){var a=d.element.data("cbvalidate"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof a!="undefined"){d.settings[e]=a}else{a=d.element.data("cbvalidate"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof a!="undefined"){d.settings[e]=a}}}})}d.element.triggerHandler("cbvalidate.init.before",[d]);if(!d.settings.init){return}if(d.settings.messages){E.extend(E.validator.messages,d.settings.messages)}d.element.find(".cbPasswordUnmask").each(function(){var e=E(this).find("input");var t=E(this).find(".cbPasswordUnmaskShow");var a=E(this).find(".cbPasswordUnmaskHide");t.on("click",function(){e.attr("type","text");t.addClass("hidden");a.removeClass("hidden");e.focus()});a.on("click",function(){e.attr("type","password");t.removeClass("hidden");a.addClass("hidden");e.focus()});e.data("passwordunmask",true)});d.element.on("submit",function(e){var t=E(this).find('button[type="submit"][data-submit-text],input[type="submit"][data-submit-text]');t.each(function(){var e=E(this).data("submit-text");var t=null;E(this).prop("disabled",true);if(E(this).is("input")){t=E(this).val();E(this).val(e)}else{t=E(this).html();E(this).html(e)}E(this).data("button-text",t)});E(this).find(".cbPasswordUnmask").each(function(){if(E(this).find('input[type="password"]').length){return}E(this).find("input").attr("type","password");E(this).find(".cbPasswordUnmaskShow").removeClass("hidden");E(this).find(".cbPasswordUnmaskHide").addClass("hidden")});var a=E(this).validate();a.cbIsFormSubmitting=true;var i=a.form();a.cbIsFormSubmitting=false;if(!i){t.each(function(){var e=E(this).data("button-text");E(this).prop("disabled",false);if(E(this).is("input")){E(this).val(e)}else{E(this).html(e)}E(this).removeData("button-text")});var s=d.validate.errorList;if(s.length){var r=E(s[0].element);var n=r.closest(".cbTabPane");if(n.length){var l=n.closest(".cbTabs");if(l.length){var o=l.data("cbtabs");if(o){o.element.cbtabs("select",n.attr("id"))}}}E.scrollTo(r,0,{axis:"y",offset:{top:-((E(window).outerHeight()-r.outerHeight())/2),left:0}})}d.element.find(".cbValidationHasImageData").prop("disabled",false);a.focusInvalid();e.preventDefault()}else{d.element.find(".cbValidationHasImageData").prop("disabled",true)}d.element.triggerHandler("cbvalidate.validate",[d,i])});d.validate=d.element.validate({onsubmit:false,ignoreTitle:true,errorClass:"cbValidationMessage",validClass:"cbValidationMessage",ignore:'.cbValidationDisabled,.hidden,.disabled,.ignore,:disabled,[readonly],[type="hidden"]:not(.cbValidationAllowed)',cbIsFormSubmitting:false,cbIsOnFocusIn:false,cbIsOnFocusOut:false,cbIsOnKeyUp:false,cbIsOnClick:false,cbIsOnChange:false,success:function(e,t){var a=d.validate.errorsFor(t);if(a.length>1){a.not(e).remove()}var i=E(t).data("remote-response");if(!i){i=E(t).data("msg-success")}if(i){e.find(".cbValidationIcon").remove();e.removeClass("invalid-feedback");e.html(i);if(i.toString().charAt(0)!="<"){e.prepend('<span class="cbValidationIcon fa fa-check mr-1"></span>');e.addClass("valid-feedback")}}else{e.remove()}d.element.triggerHandler("cbvalidate.success",[d,e,t])},showErrors:function(e,t){var s=this;s.defaultShowErrors();E.each(t,function(e,t){if(E(t.element).hasClass("cbValidationHasImageData")){var a=E(t.element).siblings(".cbValidationImageData,.cbValidationImageDataCrop");if(a.length){a.remove()}E(t.element).removeClass("cbValidationHasImageData")}var i=s.errorsFor(t.element);if(i.length>1){i.not(":last").remove()}i.find(".cbValidationIcon").remove();i.removeClass("valid-feedback");if(t.message.toString().charAt(0)!="<"){i.prepend('<span class="cbValidationIcon fa fa-times mr-1"></span>');i.addClass("invalid-feedback")}});d.element.triggerHandler("cbvalidate.showerrors",[d,e,t])},highlight:function(e,t,a){if(E(e).is(":checkbox")||E(e).is(":radio")){E(e).closest(".cb_form_line,tr").find(":checkbox,:radio").addClass("cbValidationError is-invalid")}else{E(e).addClass("cbValidationError is-invalid");if(E(e).hasClass("cbDatePicker")){E(e).siblings(".cbDatePickerSelector").addClass("cbValidationError is-invalid");E(e).siblings(".combodate").find("select").addClass("cbValidationError is-invalid")}}E(e).closest(".cb_form_line,tr").find(".col-form-label").addClass("cbValidationError text-danger");E(e).closest(".cb_form_line").addClass("cbValidationError");E(e).closest("tr").addClass("cbValidationError");var i=d.element.find(".cbTabs");if(i.length){i.each(function(){var i=E(this).data("cbtabs");if(i){E.each(i.tabs,function(e,t){var a=t.tabPane.find("input.cbValidationError,select.cbValidationError,textarea.cbValidationError").not(":submit,:reset,:image,[disabled],[readonly]").not(d.validate.settings.ignore);if(a.length){t.tabNav.addClass("cbValidationError");if(i.tabsNav.hasClass("nav-pills")){t.tabNavLink.addClass("text-white bg-danger")}else{t.tabNavLink.addClass("text-danger border-danger")}}})}})}d.element.triggerHandler("cbvalidate.highlight",[d,e,t,a])},unhighlight:function(e,t,a){if(E(e).is(":checkbox")||E(e).is(":radio")){E(e).closest(".cb_form_line,tr").find(":checkbox,:radio").removeClass("cbValidationError is-invalid")}else{E(e).removeClass("cbValidationError is-invalid");if(E(e).hasClass("cbDatePicker")){E(e).siblings(".cbDatePickerSelector").removeClass("cbValidationError is-invalid");E(e).siblings(".combodate").find("select").removeClass("cbValidationError is-invalid")}}E(e).closest(".cb_form_line,tr").find(".col-form-label").removeClass("cbValidationError text-danger");E(e).closest(".cb_form_line").removeClass("cbValidationError");E(e).closest("tr").removeClass("cbValidationError");var i=d.element.find(".cbTabs");if(i.length){i.each(function(){var i=E(this).data("cbtabs");if(i){E.each(i.tabs,function(e,t){var a=t.tabPane.find("input.cbValidationError,select.cbValidationError,textarea.cbValidationError").not(":submit,:reset,:image,[disabled],[readonly]").not(d.validate.settings.ignore);if(!a.length){t.tabNav.removeClass("cbValidationError");if(i.tabsNav.hasClass("nav-pills")){t.tabNavLink.removeClass("text-white bg-danger")}else{t.tabNavLink.removeClass("text-danger border-danger")}}})}})}d.element.triggerHandler("cbvalidate.unhighlight",[d,e,t,a])},errorElement:"div",errorPlacement:function(e,t){if(E(t).is(":checkbox")||E(t).is(":radio")||E(t).parent().hasClass("input-group")){t.parent().siblings().last().after(e)}else{t.parent().append(e)}d.element.triggerHandler("cbvalidate.errorplacement",[d,e,t])},onfocusin:function(e){this.cbIsOnFocusIn=true;E.validator.defaults.onfocusin.call(this,e);this.cbIsOnFocusIn=false;d.element.triggerHandler("cbvalidate.focusin",[d,e])},onfocusout:function(e,t){if(E(e).data("passwordunmask")===true&&!E(e).is('input[type="password"]')&&!E(t.relatedTarget).is(".cbPasswordUnmaskShow")&&!E(t.relatedTarget).is(".cbPasswordUnmaskHide")){var a=E(e).closest(".cbPasswordUnmask");E(e).attr("type","password");a.find(".cbPasswordUnmaskShow").removeClass("hidden");a.find(".cbPasswordUnmaskHide").addClass("hidden")}this.cbIsOnFocusOut=true;if(!this.checkable(e)&&(e.name in this.submitted||this.optional(e)!==true)){this.element(e)}this.cbIsOnFocusOut=false;d.element.triggerHandler("cbvalidate.focusout",[d,e])},onkeyup:function(e,t){this.cbIsOnKeyUp=true;E.validator.defaults.onkeyup.call(this,e,t);this.cbIsOnKeyUp=false;d.element.triggerHandler("cbvalidate.keyup",[d,e,t])},onclick:function(e){this.cbIsOnClick=true;E.validator.defaults.onclick.call(this,e);this.cbIsOnClick=false;d.element.triggerHandler("cbvalidate.click",[d,e])},onchange:function(e){this.cbIsOnChange=true;if(e.name in this.submitted||this.optional(e)!==true){this.element(e)}this.cbIsOnChange=false;d.element.triggerHandler("cbvalidate.change",[d,e])}});d.element.on("change.validate","input,select,textarea",function(e){var t=E.data(this.form,"validator");var a="on"+e.type.replace(/^validate/,"");var i=t.settings;if(i[a]&&!E(this).is(i.ignore)){i[a].call(t,this,e)}}).find("input,select,textarea").on("cloned.validate",function(){if(E(this).is(d.validate.settings.ignore)){return}if(E(this).is(":checkbox")||E(this).is(":radio")){E(this).closest(".cb_form_line,tr").find(":checkbox,:radio").removeClass("cbValidationError is-invalid")}else{E(this).removeClass("cbValidationError is-invalid");if(E(this).hasClass("cbDatePicker")){E(this).siblings(".cbDatePickerSelector").removeClass("cbValidationError is-invalid");E(this).siblings(".combodate").find("select").removeClass("cbValidationError is-invalid")}}E(this).closest(".cb_form_line,tr").find(".col-form-label").removeClass("cbValidationError text-danger");E(this).closest(".cb_form_line").removeClass("cbValidationError");E(this).closest("tr").removeClass("cbValidationError");E(this).closest(".cb_form_line,tr").find(".cbValidationMessage").remove();E(this).removeData("previousValue");E(this).removeData("remote-response")});d.element.find(".cbRepeat").on("cbrepeat.add",function(e,t,a){d.element.cbvalidate("validate",a,true)});d.validate.options=d.settings;d.element.on("remove.cbvalidate destroy.cbvalidate",function(){d.element.cbvalidate("destroy")});d.element.triggerHandler("cbvalidate.init.after",[d]);d.element.data("cbvalidate",d);a.push(d)})},validate:function(e,t){var a=E(this).data("cbvalidate");if(!a){return true}if(typeof e=="undefined"){e=null}if(typeof t=="undefined"){t=false}a.validate.cbIsFormSubmitting=true;var i=true;if(e){if(t){var s=0;a.validate.elements().filter(function(){return E(this).closest(e).length||E(this).is(e)}).each(function(){if(!a.validate.element(this)){s++}});i=!s}else{i=a.validate.element(e)}}else{i=a.validate.form()}a.validate.cbIsFormSubmitting=false;if(!i){a.validate.focusInvalid()}a.element.triggerHandler("cbvalidate.validate",[a,i,e]);return i},reset:function(){var e=E(this).data("cbvalidate");if(!e){return false}e.validate.resetForm();e.element.triggerHandler("cbvalidate.reset",[e]);return true},invalid:function(){var e=E(this).data("cbvalidate");if(!e){return 0}var t=e.validate.numberOfInvalids();e.element.triggerHandler("cbvalidate.invalid",[e,t]);return t},focus:function(){var e=E(this).data("cbvalidate");if(!e){return false}e.validate.focusInvalid();e.element.triggerHandler("cbvalidate.focus",[e]);return true},valid:function(){var e=E(this).data("cbvalidate");if(!e){return true}var t=e.validate.valid();e.element.triggerHandler("cbvalidate.valid",[e,t]);return t},elements:function(e){var t=E(this).data("cbvalidate");if(!t){return[]}if(typeof e=="undefined"){e=null}var a=[];if(e=="invalid"){a=t.validate.invalidElements()}else if(e=="valid"){a=t.validate.validElements()}else{a=t.validate.elements()}t.element.triggerHandler("cbvalidate.elements",[t,a]);return a},errors:function(){var e=E(this).data("cbvalidate");if(!e){return[]}var t=e.validate.errors();e.element.triggerHandler("cbvalidate.errors",[e,t]);return t},destroy:function(){var e=E(this).data("cbvalidate");if(!e){return this}e.element.off("destroy.cbvalidate");e.validate.destroy();return this},instances:function(){return a}};E.validator.addMethod("creditcard",function(e,t){if(this.optional(t)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(e)){return false}var a=0,i=0,s=false,r,n;e=e.replace(/\D/g,"");if(e.length<13||e.length>19){return false}for(r=e.length-1;r>=0;r--){n=e.charAt(r);i=parseInt(n,10);if(s){if((i*=2)>9){i-=9}}a+=i;s=!s}return a%10===0},"Please enter a valid credit card number.");E.validator.addMethod("maxage",function(e,t,a){if(this.optional(t)){return true}var i=new Date;var s=new Date(e);var r=i.getFullYear()-s.getFullYear();if(r<a+1){return true}var n=i.getMonth()-s.getMonth();if(n<0||n===0&&i.getDate()<s.getDate()){r--}return r<=a},E.validator.format("You must be no more than {0} years old."));E.validator.addMethod("minage",function(e,t,a){if(this.optional(t)){return true}var i=new Date;var s=new Date(e);var r=i.getFullYear()-s.getFullYear();if(r>a+1){return true}var n=i.getMonth()-s.getMonth();if(n<0||n===0&&i.getDate()<s.getDate()){r--}return r>=a},E.validator.format("You must be at least {0} years old."));E.validator.addMethod("rangeage",function(e,t,a){if(this.optional(t)){return true}var i=new Date;var s=new Date(e);var r=i.getFullYear()-s.getFullYear();if(r>a[0]+1&&r<a[1]+1){return true}var n=i.getMonth()-s.getMonth();if(n<0||n===0&&i.getDate()<s.getDate()){r--}return r>=a[0]&&r<=a[1]},E.validator.format("You must be at least {0} years old, but not older than {1}."));E.validator.addMethod("maxWords",function(e,t,a){return this.optional(t)||E(e).text().match(/\b\w+\b/g).length<=a},E.validator.format("Please enter {0} words or less."));E.validator.addMethod("minWords",function(e,t,a){return this.optional(t)||E(e).text().match(/\b\w+\b/g).length>=a},E.validator.format("Please enter at least {0} words."));E.validator.addMethod("rangeWords",function(e,t,a){var i=E(e).text();var s=/\b\w+\b/g;return this.optional(t)||i.match(s).length>=a[0]&&i.match(s).length<=a[1]},E.validator.format("Please enter between {0} and {1} words."));E.validator.addMethod("pattern",function(e,t,a){if(this.optional(t)){return true}if(typeof a==="string"){a=decodeURIComponent(a);var i=a.substr(0,1);var s=a.lastIndexOf(i);var r=a.slice(1,s);var n=a.substr(s+1);a=new RegExp(r,n)}return a.test(e)},"Invalid format.");E.validator.addMethod("isPattern",function(e,t,a){if(this.optional(t)){return true}try{if(typeof e==="string"){var i=e.substr(0,1);var s=e.lastIndexOf(i);var r=e.slice(1,s);var n=e.substr(s+1);e=new RegExp(r,n)}e.test("")}catch(e){return false}return true},"Invalid regular expression.");E.validator.addMethod("cburl",function(e,t){return this.optional(t)||/^(?:(https?|ftp):\/\/)?(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},"Please enter a valid URL.");E.validator.addMethod("cbusername",function(e,t){return this.optional(t)||!/^\s+|[<>"'%;()&\\]|\.\.\/|\s+$/i.test(e)},"Please enter a valid username with no space at beginning or end and must not contain the following characters: < > \\ \" ' % ; ( ) &");E.validator.addMethod("passwordstrength",function(a,e){if(!a){E(e).data("msg-success","");return true}var t=[/.{8,}/,/[A-Z]+/,/[a-z]+/,/\d+/,/[\-\]\\`~!@#$%^&*()_=+[{}|;:'",<.>\/?]+/,/.{12,}/,/[A-Z]{2,}/,/[a-z]{2,}/,/\d{2,}/,/[\-\]\\`~!@#$%^&*()_=+[{}|;:'",<.>\/?]{2,}/];var i=0;E.each(t,function(e,t){if(a.match(t)){i++}});if(i>t.length){i=t.length}else if(i<0){i=0}var s=i*(100/t.length);var r="cbPasswordStrengthStrong bg-success";if(s<=30){r="cbPasswordStrengthVeryWeak bg-danger"}else if(s<=50){r="cbPasswordStrengthWeak bg-warning"}else if(s<=70){r="cbPasswordStrengthOk bg-info"}var n=E(e).outerWidth();if(E(e).is(":hidden")){var l=E(e).clone(false).attr({id:"",class:""}).css({position:"absolute",display:"block",width:"auto",visibility:"hidden",padding:E(e).css("padding"),border:E(e).css("border"),margin:E(e).css("margin"),fontFamily:E(e).css("font-family"),fontSize:E(e).css("font-size"),fontWeight:E(e).css("font-weight"),boxSizing:E(e).css("box-sizing")}).appendTo("body");n=l.outerWidth();l.remove()}E(e).data("msg-success",'<div class="cbPasswordStrength progress m-0 mt-2" style="width: '+n+'px;"><div class="cbPasswordStrengthBar progress-bar '+r+'" style="width: '+s+'%"></div></div>');return true},"");E.validator.addMethod("resize",function(e,t,a){if(this.optional(t)||this.cbIsFormSubmitting){return true}var i=E(t).siblings(".cbValidationImageData,.cbValidationImageDataCrop");if(!window.FileReader){if(i.length){i.remove()}E(t).removeClass("cbValidationHasImageData");return true}var s=this.previousValue(t);var r=this;if(s.old===e){return s.valid}s.old=e;if(i.length){i.remove()}E(t).removeClass("cbValidationHasImageData");var n=typeof a[0]!="undefined"?a[0]:0;var l=typeof a[1]!="undefined"?a[1]:0;if((n||l)&&E(t).attr("type")==="file"){if(t.files&&t.files.length){for(var o=0;o<t.files.length;o++){var d=t.files[o];if(!/image/.test(d.type)||/\.gif$/i.test(d.name)){continue}f.call(t,r,d,s,a)}return"pending"}}return true});E.validator.addMethod("accept",function(e,t,a){var i=typeof a==="string"?a.replace(/\s/g,"").replace(/,/g,"|"):"image/*";var s=this.optional(t);if(s){return s}if(E(t).attr("type")==="file"){i=i.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*");if(E(t).hasClass("cbValidationHasImageData")){var r=E(t).siblings(".cbValidationImageData").val();var n=r.substring(r.indexOf(":")+1,r.indexOf(";"));if(n&&!n.match(new RegExp(".?("+i+")$","i"))){return false}}else{if(t.files&&t.files.length){for(var l=0;l<t.files.length;l++){var o=t.files[l];if(o.type&&!o.type.replace(/mp3/,"mpeg").replace(/m4a/,"mp4").match(new RegExp(".?("+i+")$","i"))){return false}}}}}return true},E.validator.format("Please enter a value with a valid extension."));E.validator.addMethod("extension",function(e,t,a){a=typeof a==="string"?a.replace(/,/g,"|"):"png|jpe?g|gif";if(E(t).hasClass("cbValidationHasImageData")){var i=E(t).siblings(".cbValidationImageData").val();var s=i.substring(i.indexOf(":")+1,i.indexOf(";"));if(s){return this.optional(t)||s.substring(s.indexOf("/")+1).match(new RegExp("^"+a+"$","i"))}}return this.optional(t)||e.match(new RegExp("\\.("+a+")$","i"))},E.validator.format("Please enter a value with a valid extension."));E.validator.addMethod("filesize",function(e,t,a){var i=this.optional(t);if(i){return i}var s=false;var r=false;if((a[0]||a[1])&&E(t).attr("type")==="file"){if(E(t).hasClass("cbValidationHasImageData")){var n=E(t).siblings(".cbValidationImageData").val();var l=n.length-(n.indexOf(",")+1);var o=n.charAt(n.length-2)==="="?2:n.charAt(n.length-1)==="="?1:0;var d=h(l*.75-o,a[2]);if(a[0]&&d<a[0]){s=true}if(a[1]&&d>a[1]){r=true}}else if(t.files&&t.files.length){for(var f=0;f<t.files.length;f++){var c=t.files[f];var u=h(c.size,a[2]);if(a[0]&&u<a[0]){s=true}if(a[1]&&u>a[1]){r=true}}}}if(s||r){if(!this.settings.messages[t.name]){this.settings.messages[t.name]={};this.settings.messages[t.name].min=this.defaultMessage(t,"filesizemin");this.settings.messages[t.name].max=this.defaultMessage(t,"filesizemax");this.settings.messages[t.name].both=this.defaultMessage(t,"filesize")}if(s&&!r){this.settings.messages[t.name].filesize=this.settings.messages[t.name].min}else if(r&&!s){this.settings.messages[t.name].filesize=this.settings.messages[t.name].max}else{this.settings.messages[t.name].filesize=this.settings.messages[t.name].both}return false}return true},E.validator.format("File size must exceed the minimum of {0} {2}s, but not the maximum of {1} {2}s."));E.validator.addMethod("notEqualTo",function(e,t,a){return this.optional(t)||!E.validator.methods.equalTo.call(this,e,t,a)},"Please enter a different value, values must not be the same.");E.validator.addMethod("maxselect",function(e,t,a){return E.validator.methods.maxlength.call(this,e,t,a)},E.validator.format("Please select no more than {0} options."));E.validator.addMethod("minselect",function(e,t,a){return E.validator.methods.minlength.call(this,e,t,a)},E.validator.format("Please select at least {0} options."));E.validator.addMethod("requiredIf",function(e,t,a){var i=E(a);if(this.settings.onfocusout){i.off(".validate-requiredIf").on("blur.validate-requiredIf",function(){E(t).valid()})}if(i[0].nodeName.toLowerCase()==="select"){var s=i.val();if(!(s&&s.length>0)){return true}}var r=this.elementValue(i[0]);if(this.checkable(i[0])){if(this.getLength(r,i[0])<=0){return true}}if(r.length<=0){return true}return E.validator.methods.required.call(this,e,t,null)},"This field is required.");E.validator.addMethod("forbiddenWords",function(a,e,t){if(this.optional(e)){return true}if(E.isArray(t)){var i=true;E.each(t,function(e,t){if(t!==""&&a.indexOf(t)!=-1){i=false;return false}});return i}else{if(t!==""&&a.indexOf(t)!=-1){return false}}return true},"Invalid format.");E.validator.addMethod("cbfield",function(e,t,a){var i=this.options;if(!a.method){a.method="cbfield"}if(!a["function"]){a["function"]="checkvalue"}if(this.checkable(t)){var s=[];this.findByName(t.name).filter(":checked").each(function(){s.push(E(this).val())});if(t.name.indexOf("[]")!==-1){e=s}else{e=s.join("|*|")}}if(!a.data){a.data={}}a.data.user=a.user;a.data.field=a.field;a.data.reason=a.reason;a.data.value=e;if(i.settings.cbfield.url){a.url=i.settings.cbfield.url}if(i.settings.cbfield.spooffield&&i.settings.cbfield.spooffield){a.data[i.settings.cbfield.spooffield]=i.settings.cbfield.spoofstring}if(i.settings.cbfield.spamfield&&i.settings.cbfield.spamstring){a.data[i.settings.cbfield.spamfield]=i.settings.cbfield.spamstring}return E.validator.methods.cbremote.call(this,e,t,a)},"Please fix this field.");E.validator.addMethod("cbremote",function(r,n,l){E(n).data("remote-response",null);if(this.optional(n)||this.cbIsFormSubmitting||!l.url||E(n).hasClass("cbValidationRemoteSkip")){return true}E(n).addClass("cbValidationRemoteSkip");if(!E(n).valid()){E(n).removeClass("cbValidationRemoteSkip");return true}else{E(n).removeClass("cbValidationRemoteSkip")}E.each(l,function(e,t){if(typeof t!="object"&&typeof t!="array"&&e!="url"&&e!="data"){l.url=l.url.replace("["+e+"]",t)}});var o=this.previousValue(n);var d=this;if(!this.settings.messages[n.name]){this.settings.messages[n.name]={}}if(!l.method){l.method="cbremote"}o.originalMessage=this.settings.messages[n.name][l.method];this.settings.messages[n.name][l.method]=o.message;if(o.old===r){E(n).data("remote-response",E(o).data("remote-response"));return o.valid}else if(this.cbIsOnKeyUp){return true}o.old=r;E(o).data("remote-response",null);this.startRequest(n);E.ajax({url:l.url,type:"POST",mode:"abort",port:"validate"+n.name,dataType:"json",data:l.data,converters:{"text json":function(t){try{return E.parseJSON(t)}catch(e){return{valid:true,message:t}}}},beforeSend:function(){var e=E('<span class="cbFieldIcons cbValidateSpinner"><div class="cbSpinner spinner-border spinner-border-sm text-secondary"></div></span>');if(E(n).parent(".form-check").length){e.insertAfter(E(n).parent().siblings(".form-check").last())}else if(E(n).parent(".btn-group-list").length){e.insertAfter(E(n).parent())}else if(E(n).siblings(".cbFieldIcons").length){e.insertBefore(E(n).siblings(".cbFieldIcons"))}else{e.insertAfter(E(n))}}}).done(function(e){var t=e.valid===true||e.valid==="true";var a={};var i=null;var s=null;d.settings.messages[n.name][l.method]=o.originalMessage;if(t){E(n).data("remote-response",e.message);E(o).data("remote-response",e.message);s=d.formSubmitted;d.resetInternals();d.toHide=d.errorsFor(n);d.prepareElement(n);d.formSubmitted=s;d.successList.push(n);delete d.invalid[n.name];d.showErrors()}else{i=e.message||d.defaultMessage(n,l.method);a[n.name]=o.message=E.isFunction(i)?i(r):i;d.invalid[n.name]=true;d.showErrors(a)}o.valid=t;d.stopRequest(n,t)}).always(function(){if(E(n).parent(".form-check,.btn-group-list").length){E(n).parent().siblings(".cbValidateSpinner").remove()}else{E(n).siblings(".cbValidateSpinner").remove()}});return"pending"},"Please fix this field.");function f(d,f,c,u){var h=this;if(/\.(jpg|jpeg)$/i.test(f.name)){var e=new FileReader;e.mimeType=f.type;e.onload=function(e){var t=null;if(window.DataView&&!CSS.supports("image-orientation","from-image")){var a=new DataView(e.target.result);if(a.getUint16(0,false)==65496){var i=a.byteLength;var s=2;while(s<i){var r=a.getUint16(s,false);s+=2;if(r==65505){if(a.getUint32(s+=2,false)==1165519206){var n=a.getUint16(s+=6,false)==18761;s+=a.getUint32(s+4,n);var l=a.getUint16(s,n);s+=2;for(var o=0;o<l;o++){if(a.getUint16(s+o*12,n)==274){t=a.getUint16(s+o*12+8,n);break}}if(t){break}}else{break}}else if((r&65280)!=65280){break}else{s+=a.getUint16(s,false)}}}}f.orientation=t;m.call(h,d,f,c,u)};e.onerror=function(){d.stopRequest(h,true)};e.readAsArrayBuffer(f)}else{f.orientation=null;m.call(h,d,f,c,u)}}function m(b,p,F,D){var w=this;var C=typeof D[0]!="undefined"?D[0]:0;var y=typeof D[1]!="undefined"?D[1]:0;var I=typeof D[2]!="undefined"?D[2]:1;var V=typeof D[3]!="undefined"?D[3]:1;var k=E.validator.messages.cropwidth;var x=E.validator.messages.cropheight;var e=new FileReader;e.mimeType=p.type;e.onload=function(e){var v=new Image;v.mimeType=this.mimeType;v.onload=function(e){var n=v;var t=v.width;var a=v.height;var l=v.mimeType;var o=t;var d=a;if(p.orientation){var i=document.createElement("canvas");if(p.orientation>4&&p.orientation<9){o=a;C=typeof D[1]!="undefined"?D[1]:0;d=t;y=typeof D[0]!="undefined"?D[0]:0;i.width=a;i.height=t}else{i.width=t;i.height=a}var s=i.getContext("2d");s.mozImageSmoothingEnabled=false;s.webkitImageSmoothingEnabled=false;s.msImageSmoothingEnabled=false;s.imageSmoothingEnabled=false;s.imageSmoothingQuality="high";switch(p.orientation){case 2:s.transform(-1,0,0,1,t,0);break;case 3:s.transform(-1,0,0,-1,t,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,t);break;case 8:s.transform(0,-1,1,0,0,t);break}s.drawImage(n,0,0);n=i}if(!C){C=o}if(!y){y=d}var r=0;var f=0;if(!I){o=C;d=y}else if(I==1){if(o>C){d=Math.floor(d*(C/o));o=C}if(d>y){o=Math.floor(o*(y/d));d=y}}else if(I==2||I==3){if(C>y||y==C&&d>o){d=Math.floor(d*(C/o));o=C;if(I==2){f=Math.floor(y/2-d/2)}}else if(y>C||y==C&&o>d){o=Math.floor(o*(y/d));d=y;if(I==2){r=Math.floor(C/2-o/2)}}else if(o==d){o=C;d=y}}var c=null;if(d>o){c="portrait";if(d<=y){c="landscape"}}else if(o>d){c="landscape";if(o<=C){c="portrait"}}else{c="square"}if(!V&&t==o&&a==d&&I!=3){b.stopRequest(w,true)}else{var u=document.createElement("canvas");if(I==2){u.width=C;u.height=y;if(c=="square"){r=0;f=0}}else{u.width=o;u.height=d}var h=u.getContext("2d");h.mozImageSmoothingEnabled=false;h.webkitImageSmoothingEnabled=false;h.msImageSmoothingEnabled=false;h.imageSmoothingEnabled=false;h.imageSmoothingQuality="high";h.drawImage(n,r,f,o,d);var m=E(w).attr("name");E(w).addClass("cbValidationHasImageData");E('<input type="hidden"'+(m.length?' name="'+m+'_image_data"':"")+' value="'+u.toDataURL(l)+'" class="cbValidationImageData" />').insertAfter(E(w));if(I==3&&c!="square"){E('<div class="cbValidationImageDataCrop"><div class="cbValidationImageDataCropMsg">'+(c=="landscape"?k:c=="portrait"?x:"")+'</div><div class="cbValidationImageDataCropArea"><div class="cbValidationImageDataCropSelect"></div><img src="'+u.toDataURL(l)+'" class="cbValidationImageDataCropImage" /></div></div>').insertAfter(E(w).siblings(".cbValidationImageData"));var g=function(e){var t=0;var a=0;if(e===true){if(c=="landscape"){t=C/2-o/2}else if(c=="portrait"){a=y/2-d/2}}else{var i=E(this).position();if(c=="landscape"){if(E(this).parent().width()){t=-(o/(E(this).parent().width()/i.left))}}else if(c=="portrait"){if(E(this).parent().height()){a=-(d/(E(this).parent().height()/i.top))}}}var s=document.createElement("canvas");s.width=C;s.height=y;var r=s.getContext("2d");r.mozImageSmoothingEnabled=false;r.webkitImageSmoothingEnabled=false;r.msImageSmoothingEnabled=false;r.imageSmoothingEnabled=false;r.imageSmoothingQuality="high";r.drawImage(n,t,a,o,d);if(e===true){E(this).siblings(".cbValidationImageData").val(s.toDataURL(l))}else{E(this).closest(".cbValidationImageDataCrop").siblings(".cbValidationImageData").val(s.toDataURL(l))}};g.call(w,true);E(w).siblings(".cbValidationImageDataCrop").find(".cbValidationImageDataCropImage").on("load",function(){E(this).siblings(".cbValidationImageDataCropSelect").draggable({containment:"parent",scroll:false,axes:c=="landscape"?"x":c=="portrait"?"y":false,create:function(){if(c=="landscape"){E(this).css({height:"100%",width:C/o*100+"%"}).css("left",E(this).parent().width()/2-E(this).width()/2+"px")}else if(c=="portrait"){E(this).css({height:y/d*100+"%",width:"100%"}).css("top",E(this).parent().height()/2-E(this).height()/2+"px")}else{E(this).css({height:"100%",width:"100%"})}g.call(this)},stop:function(e,t){g.call(this)}})})}F.valid=true;b.stopRequest(w,true)}};v.src=e.target.result};e.onerror=function(){b.stopRequest(w,true)};e.readAsDataURL(p)}function h(e,t){if(t=="TB"){e=e/1024/1024/1024/1024}else if(t=="GB"){e=e/1024/1024/1024}else if(t=="MB"){e=e/1024/1024}else if(t=="KB"){e=e/1024}return e}E.fn.cbvalidate=function(e){if(t[e]){return t[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return t.init.apply(this,arguments)}return this};E.fn.cbvalidate.defaults={init:true,useData:false,messages:null,settings:null}})(jQuery);